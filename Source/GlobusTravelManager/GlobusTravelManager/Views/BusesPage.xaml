<Page x:Class="GlobusTravelManager.Views.BusesPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Управление автобусами">

	<Grid Margin="10">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- Панель управления -->
		<StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
			<Button Content="➕ Добавить" Width="120" Height="35"
                    Background="#4CAF50" Foreground="White"
                    Click="BtnAdd_Click"/>

			<Button Content="✏️ Редактировать" Width="120" Height="35" Margin="10,0,0,0"
                    Background="#2196F3" Foreground="White"
                    Click="BtnEdit_Click"/>

			<Button Content="🗑️ Удалить" Width="120" Height="35" Margin="10,0,0,0"
                    Background="#F44336" Foreground="White"
                    Click="BtnDelete_Click"/>

			<Button Content="🔄 Обновить" Width="120" Height="35" Margin="10,0,0,0"
                    Click="BtnRefresh_Click"/>
		</StackPanel>

		<!-- Список автобусов -->
		<DataGrid x:Name="dgBuses" Grid.Row="1"
                  AutoGenerateColumns="False" IsReadOnly="True"
                  CanUserAddRows="False" SelectionMode="Single">

			<DataGrid.Columns>
				<DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="40"/>
				<DataGridTextColumn Header="Тип автобуса" Binding="{Binding Name}" Width="150"/>
				<DataGridTextColumn Header="Описание" Binding="{Binding Description}" Width="250"/>
				<DataGridTextColumn Header="Вместимость" Binding="{Binding Capacity}" Width="100"/>

				<!-- Используется в турах -->
				<DataGridTemplateColumn Header="Используется в турах" Width="120">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate>
							<TextBlock Text="{Binding UsageCount}" HorizontalAlignment="Center"/>
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>
			</DataGrid.Columns>
		</DataGrid>

		<!-- Статистика -->
		<StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,10,0,0">
			<TextBlock Text="Типов автобусов:" FontWeight="Bold"/>
			<TextBlock x:Name="tbBusCount" Text="0" FontWeight="Bold" Margin="5,0,20,0"/>

			<TextBlock Text="Общая вместимость:" FontWeight="Bold"/>
			<TextBlock x:Name="tbTotalCapacity" Text="0" FontWeight="Bold" Margin="5,0,0,0"/>
		</StackPanel>
	</Grid>
</Page>